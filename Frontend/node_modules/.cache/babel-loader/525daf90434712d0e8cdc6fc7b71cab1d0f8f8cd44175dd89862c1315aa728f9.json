{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\gv250\\\\OneDrive\\\\Escritorio\\\\Productos\\\\frontend\\\\src\\\\components\\\\Vuelos.jsx\",\n  _s = $RefreshSig$();\nimport React, { useState, useEffect } from 'react';\nimport '../css/SimuladorVuelo.css';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst Vuelos = ({\n  solicitudId\n}) => {\n  _s();\n  const [vuelo, setVuelo] = useState(null);\n  const [progress, setProgress] = useState(0);\n  const [distance, setDistance] = useState(0);\n  const [timeRemaining, setTimeRemaining] = useState(0);\n  const [completed, setCompleted] = useState(false);\n  useEffect(() => {\n    // Obtiene el vuelo asociado a la solicitud\n    fetch(`http://localhost:8081/api/vuelos/solicitud/${solicitudId}`).then(res => res.json()).then(data => {\n      if (data.length > 0) {\n        setVuelo(data[0]); // suponiendo que solo hay 1 vuelo por solicitud\n        startFlightSimulation();\n      }\n    }).catch(err => console.error('Error obteniendo vuelo:', err));\n  }, [solicitudId]);\n\n  // Simula el vuelo por 2 a 3 minutos\n  const startFlightSimulation = () => {\n    const flightDuration = Math.floor(Math.random() * (3 - 2 + 1) + 2) * 60; // duraci√≥n en segundos\n    setTimeRemaining(flightDuration);\n    const totalDistance = Math.floor(Math.random() * (5 - 3 + 1) + 3); // distancia simulada en km\n\n    let elapsed = 0;\n    const interval = setInterval(() => {\n      elapsed += 1;\n      const progressPercent = Math.min(elapsed / flightDuration * 100, 100);\n      const distanceTraveled = (totalDistance * (elapsed / flightDuration)).toFixed(2);\n      setProgress(progressPercent);\n      setDistance(distanceTraveled);\n      setTimeRemaining(flightDuration - elapsed);\n      if (elapsed >= flightDuration) {\n        clearInterval(interval);\n        setCompleted(true);\n      }\n    }, 1000);\n  };\n\n  // Confirma la llegada del env√≠o\n  const confirmarLlegada = async () => {\n    if (!vuelo) return;\n    try {\n      // Actualizar el vuelo\n      await fetch(`http://localhost:8081/api/vuelos/${vuelo.id}`, {\n        method: 'PUT',\n        headers: {\n          'Content-Type': 'application/json'\n        },\n        body: JSON.stringify({\n          ...vuelo,\n          fechaFin: new Date().toISOString(),\n          duracionMinutos: Math.round(vuelo.fechaInicio ? (new Date() - new Date(vuelo.fechaInicio)) / 60000 : 2),\n          distanciaKm: distance,\n          estadoEntrega: 'entregado'\n        })\n      });\n\n      // Actualizar la solicitud a confirmada\n      await fetch(`http://localhost:8081/api/solicitudes/${solicitudId}/estado?nuevoEstado=confirmado`, {\n        method: 'PATCH'\n      });\n      alert('‚úÖ Entrega confirmada correctamente');\n    } catch (error) {\n      console.error('Error al confirmar llegada:', error);\n      alert('‚ùå Error al confirmar llegada');\n    }\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"vuelo-container\",\n    children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n      children: \"Simulaci\\xF3n de Vuelo \\uD83D\\uDE81\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 79,\n      columnNumber: 7\n    }, this), vuelo ? /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"vuelo-status\",\n      children: [/*#__PURE__*/_jsxDEV(\"p\", {\n        children: [/*#__PURE__*/_jsxDEV(\"strong\", {\n          children: \"ID Vuelo:\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 82,\n          columnNumber: 14\n        }, this), \" \", vuelo.id]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 82,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"progress-bar\",\n        children: /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"progress\",\n          style: {\n            width: `${progress}%`\n          }\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 84,\n          columnNumber: 13\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 83,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n        children: [\"Progreso: \", progress.toFixed(0), \"%\"]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 86,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n        children: [\"Distancia recorrida: \", distance, \" km\"]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 87,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n        children: [\"Tiempo restante: \", timeRemaining, \" seg\"]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 88,\n        columnNumber: 11\n      }, this), completed && /*#__PURE__*/_jsxDEV(\"button\", {\n        className: \"confirm-button\",\n        onClick: confirmarLlegada,\n        children: \"Confirmar llegada de env\\xEDo\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 91,\n        columnNumber: 13\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 81,\n      columnNumber: 9\n    }, this) : /*#__PURE__*/_jsxDEV(\"p\", {\n      children: \"Cargando datos del vuelo...\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 97,\n      columnNumber: 9\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 78,\n    columnNumber: 5\n  }, this);\n};\n_s(Vuelos, \"58yYjPGts1fFmv2TnVAxmapqsuU=\");\n_c = Vuelos;\nexport default Vuelos;\nvar _c;\n$RefreshReg$(_c, \"Vuelos\");","map":{"version":3,"names":["React","useState","useEffect","jsxDEV","_jsxDEV","Vuelos","solicitudId","_s","vuelo","setVuelo","progress","setProgress","distance","setDistance","timeRemaining","setTimeRemaining","completed","setCompleted","fetch","then","res","json","data","length","startFlightSimulation","catch","err","console","error","flightDuration","Math","floor","random","totalDistance","elapsed","interval","setInterval","progressPercent","min","distanceTraveled","toFixed","clearInterval","confirmarLlegada","id","method","headers","body","JSON","stringify","fechaFin","Date","toISOString","duracionMinutos","round","fechaInicio","distanciaKm","estadoEntrega","alert","className","children","fileName","_jsxFileName","lineNumber","columnNumber","style","width","onClick","_c","$RefreshReg$"],"sources":["C:/Users/gv250/OneDrive/Escritorio/Productos/frontend/src/components/Vuelos.jsx"],"sourcesContent":["import React, { useState, useEffect } from 'react';\r\nimport '../css/SimuladorVuelo.css'\r\n\r\nconst Vuelos = ({ solicitudId }) => {\r\n  const [vuelo, setVuelo] = useState(null);\r\n  const [progress, setProgress] = useState(0);\r\n  const [distance, setDistance] = useState(0);\r\n  const [timeRemaining, setTimeRemaining] = useState(0);\r\n  const [completed, setCompleted] = useState(false);\r\n\r\n  useEffect(() => {\r\n    // Obtiene el vuelo asociado a la solicitud\r\n    fetch(`http://localhost:8081/api/vuelos/solicitud/${solicitudId}`)\r\n      .then(res => res.json())\r\n      .then(data => {\r\n        if (data.length > 0) {\r\n          setVuelo(data[0]); // suponiendo que solo hay 1 vuelo por solicitud\r\n          startFlightSimulation();\r\n        }\r\n      })\r\n      .catch(err => console.error('Error obteniendo vuelo:', err));\r\n  }, [solicitudId]);\r\n\r\n  // Simula el vuelo por 2 a 3 minutos\r\n  const startFlightSimulation = () => {\r\n    const flightDuration = Math.floor(Math.random() * (3 - 2 + 1) + 2) * 60; // duraci√≥n en segundos\r\n    setTimeRemaining(flightDuration);\r\n    const totalDistance = Math.floor(Math.random() * (5 - 3 + 1) + 3); // distancia simulada en km\r\n\r\n    let elapsed = 0;\r\n    const interval = setInterval(() => {\r\n      elapsed += 1;\r\n      const progressPercent = Math.min((elapsed / flightDuration) * 100, 100);\r\n      const distanceTraveled = (totalDistance * (elapsed / flightDuration)).toFixed(2);\r\n\r\n      setProgress(progressPercent);\r\n      setDistance(distanceTraveled);\r\n      setTimeRemaining(flightDuration - elapsed);\r\n\r\n      if (elapsed >= flightDuration) {\r\n        clearInterval(interval);\r\n        setCompleted(true);\r\n      }\r\n    }, 1000);\r\n  };\r\n\r\n  // Confirma la llegada del env√≠o\r\n  const confirmarLlegada = async () => {\r\n    if (!vuelo) return;\r\n\r\n    try {\r\n      // Actualizar el vuelo\r\n      await fetch(`http://localhost:8081/api/vuelos/${vuelo.id}`, {\r\n        method: 'PUT',\r\n        headers: { 'Content-Type': 'application/json' },\r\n        body: JSON.stringify({\r\n          ...vuelo,\r\n          fechaFin: new Date().toISOString(),\r\n          duracionMinutos: Math.round((vuelo.fechaInicio ? (new Date() - new Date(vuelo.fechaInicio)) / 60000 : 2)),\r\n          distanciaKm: distance,\r\n          estadoEntrega: 'entregado'\r\n        })\r\n      });\r\n\r\n      // Actualizar la solicitud a confirmada\r\n      await fetch(`http://localhost:8081/api/solicitudes/${solicitudId}/estado?nuevoEstado=confirmado`, {\r\n        method: 'PATCH'\r\n      });\r\n\r\n      alert('‚úÖ Entrega confirmada correctamente');\r\n    } catch (error) {\r\n      console.error('Error al confirmar llegada:', error);\r\n      alert('‚ùå Error al confirmar llegada');\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div className=\"vuelo-container\">\r\n      <h2>Simulaci√≥n de Vuelo üöÅ</h2>\r\n      {vuelo ? (\r\n        <div className=\"vuelo-status\">\r\n          <p><strong>ID Vuelo:</strong> {vuelo.id}</p>\r\n          <div className=\"progress-bar\">\r\n            <div className=\"progress\" style={{ width: `${progress}%` }}></div>\r\n          </div>\r\n          <p>Progreso: {progress.toFixed(0)}%</p>\r\n          <p>Distancia recorrida: {distance} km</p>\r\n          <p>Tiempo restante: {timeRemaining} seg</p>\r\n\r\n          {completed && (\r\n            <button className=\"confirm-button\" onClick={confirmarLlegada}>\r\n              Confirmar llegada de env√≠o\r\n            </button>\r\n          )}\r\n        </div>\r\n      ) : (\r\n        <p>Cargando datos del vuelo...</p>\r\n      )}\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default Vuelos;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}